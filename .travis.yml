# This file was autogenerated and will overwrite each time you run travis_pypi_setup.py
deploy:
  true:
    condition: $TRAVIS_PYTHON_VERSION == "3.4"
    repo: arkottke/pygmm
    tags: true
  user: arkottke
  distributions: sdist bdist_wheel
  provider: pypi
  password:
    secure: !!binary |
      OGpCVXhMeWtXdjY3a3JZeldUbWdzOWsyUEh5NmZ0ajRGcHpFQ214dEhRcWZJU0llNEsya29rWVND
      R3NkNlgvbDBSMXhJT1JrQW4rWTZlQ2YvU2ZkNmIrNlU3Tmppb1RjUmtrR0Zmb3hXeUVibHUxZDlB
      aTdyWHBYcW5zZU5FSU9GQ1BKZDlUeERONDRwRFNVc2ttdDZ2K3ZnUGgvT3NpdFpBa3cvWlN3NFhW
      Vis3KytGMWl4Nmh1TVBOc3hkakJ5UnhhQklRRzBTYWJYY0JJUDZRbzlFcWlGQkhQeWVpYmViVlNx
      TjhTdVAvU045cWNxdDF1dXNHNXdpbTh2RUdYbEdUZW1zcnhFYzN3WjQ0eURwdHlUanl1WGg1elho
      R1NqejFRSWNvZGxPSnVvazBZTUJuVTlpQkVrM0VEOEtIK1J3Q1crVXRJR0ZneUUzNzFDRW5jSnRa
      cHkvWVl4Y2xKaG1VS3d0dGFoNTl3NmIrK2syY1VyQkpOS0VTMDduNGcvV0ZUVlB4MXJLdUEwRE12
      SHkxUUJoMmx3MGdrUFhPZVA0SFZWSnNOaGtwTlp0NCtDTlZaUEtmZ2hSUzVkOTVZcEJQWkY2UVpO
      dVNSbEY3YTFkUjc2Q2FseHQ1WEt1M2hncWJjMzl0RmF5b245NlBkUWM5RXVZMzVNQTZKMHFRQkx6
      SG8wMnRXanRJTXY4SkZzcmdBV1pOUFVtVUUyRVhkc2llSnhuVEYxR09zdXE1ZHlrRGZ2cGprKzFt
      aThyQW5NbDhlaFF3cWdjWnNsOFFSVFdQS0wzWVVOYkk4dFJCU2Y5VG5xSW91YmhJaGFPZUUxUzJ6
      elVtZHpwU3NoRVQrSjZYUWN0UGplUkxqQnkwNTMyQUtMdzlqWXFFc0E4RHFkcHJOUkVPQlpHdHM9

language: python
python:
    - "2.7"
    - "3.4"
    - "3.5"

# Source: http://conda.pydata.org/docs/travis.html
before_install:
    - sudo apt-get update
    # We do this conditionally because it saves us some downloading if the
    # version is the same.
    - if [[ "$TRAVIS_PYTHON_VERSION" == "2.7" ]]; then
        wget https://repo.continuum.io/miniconda/Miniconda-latest-Linux-x86_64.sh -O miniconda.sh;
      else
        wget https://repo.continuum.io/miniconda/Miniconda3-latest-Linux-x86_64.sh -O miniconda.sh;
      fi
    - bash miniconda.sh -b -p $HOME/miniconda
    - export PATH="$HOME/miniconda/bin:$PATH"
    - hash -r
    - conda config --set always_yes yes --set changeps1 no
    - conda update -q conda
    # Useful for debugging any issues with conda
    - conda info -a

install:
    - conda create -q -n testenv --yes pip python=$TRAVIS_PYTHON_VERSION
    - source activate testenv
    - conda install --yes numpy scipy matplotlib
    - pip install -r requirements_dev.txt
    - python setup.py install
    - pip install -e .

script:  
    - py.test --flake8 --cov-report html --cov tests/

after_success:
    coveralls
